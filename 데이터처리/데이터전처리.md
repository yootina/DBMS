# 데이터 전처리

## 데이터 생성
> 요약변수 VS 파생변수
#### `요약변수`
- 수집된 정보를 분석의 목적게 맞게 종합한 변수.
- 많은 모델에 공통으로 사용될 수 있어 재활용성이 높음.
- ex) 단어 빈도, 상품별 구매 금액, 상품별 구매량, 영화매출액 (객관적이고 누구나 동일하게 카운트 가능)

#### `파생변수`
- 특정한 의미를 갖는 작위적 정의에 의한 변수.
- 사용자가 특정 조건을 만족하거나 특정 함수에 의해 값을 만들어 의미를 부여한 변수.
- 매우 주관적일 수 있으므로 논리적 타당성을 갖추어야함.
- ex) 구매상품 다양성 변수, 가격 선호대 변수, 라이프 스타일 변수, 영화 인기도 변수 (다양하다는것을 정의하거나 선호도를 정의하거나 어떻게 규정하고 분류하는지 주관적으로 판단)

## 데이터 정제
> 결측값의 이해
- 기록 누락, 미응답, 수집오류 등의 이유로 결측이 발생.
- 결측값이 포함된 자료라도 나머지 변수의 값들은 의미있는 정보이므로, 정보의 손실을 최소화 하도록 결측을 처리하는것이 바람직함.

> 결측값 처리법
- 완전제거법: 결측값이 하나이상 포함된 자료를 제거하는 방법 (정보의 손실로 분석결과가 왜곡될 수 있음.)
- 평균대체법: 결측값을 해당 변수의 나머지 값들의 평균으로 대체하는 방법. (추정량의 표준오차가 과소추정되는 문제가 있음.)
- 핫덱대체법: 동일한 데이터 내에서 결측값이 발생한 관찰치와 유사한 특성을 가진 다른 관찰치의 정보를 이용하여 대체하는 방법
- 그밖의 결측값 처리법: Regression imputation, knn imputation등

> 이상값의 이해
- 이상값은 다른 데이터와 동떨어진 것을 말함.
- 다른 자료값들에 비해 멀리 떨어져있지만 의미가 있는 값일 수도 있고, 단순히 입력 오류로 발생한 값일 수도 있음. (어떻게 처리할지 모른다면 제거해보거나 포함해보거나 둘 다 시도해보기.)

> 이상값의 탐지
- 상자그림
- 표준화 점수(Z-score): 표준화 점수의 절대값이 2, 3보다 큰 경우를 이상값으로 진단.

> 이상값의 처리방법
- 이상값제외(trimming): 처리는 간단하지만 정보 손실이 발생하고 추정량 왜곡이 생길 수 있음.
- 이상값대체(winsorization): 이상값을 정상값 중 최대 또는 최소 등으로 대체하는 방식.
(10~20사이에 와있어야 정상인 데이터인데, 1과 300이라는 데이터가 있다면 범위의 최소(10), 최대(20)으로 대체하는 방식)
- 변수변환: 자료값 전체에 로그변환, 제곱근 변환 등을 적용 (ex. 로그변환은 1, 10, 100 값들이 0, 1, 2로 당겨짐.)

> 연속형 자료의 범주화
- 변수구간화(binning)
: 연속형 변수를 구간을 이용하여 범주화 하는 과정. (나이를 20대 30대로 범주화)
- 변수구간화의 효과
: 이상치 문제를 완화, 결측치 처리 방법이 될 수 있음. 변수간 관계가 단순화 되어 분석 시 과적합을 방지할 수 있고, 결과 해석이 용이해짐.

> 데이터 전처리 과정은 실제 분석에 들어가는 소요시간보다 훨씬 많은 시간 및 노력이 필요.